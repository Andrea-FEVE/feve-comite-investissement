<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Projet</title>
  <style>
    body {
      font-family: system-ui;
      background: #f7f8fa;
      padding: 40px;
    }

    .page {
      max-width: 920px;
      margin: 0 auto;
      background: white;
      padding: 24px;
      border-radius: 8px;
    }

    img {
      width: 100%;
      max-height: 360px;
      object-fit: cover;
      border-radius: 6px;
      margin: 16px 0;
    }

    h1 {
      margin-bottom: 8px;
    }

    .meta {
      color: #666;
      margin-bottom: 12px;
    }

    .section {
      margin-top: 24px;
    }
  </style>
</head>
<body>

<div class="page" id="project"></div>

<script>
  const params = new URLSearchParams(window.location.search);
  const slug = params.get("slug");

  fetch(`/api/project?slug=${slug}`)
    .then(r => r.json())
    .then(p => {
      document.getElementById("project").innerHTML = `
        <h1>${p.name}</h1>
        <div class="meta">${p.department} · ${p.dateComite}</div>

        ${p.photo ? `<img src="${p.photo}" />` : ""}

        <div class="section">
          <strong>Nom des porteurs de projets</strong><br>
          ${p.porteurs}
        </div>

        <div class="section">
          <strong>Surface de la ferme</strong><br>
          ${p.surface ? p.surface + " ha" : "—"}
        </div>

        <div class="section">
          <strong>Montant</strong><br>
          ${p.montant ? p.montant + " €" : "—"}
        </div>

        <div class="section">
          <strong>Lien vers le parcellaire</strong><br>
          ${
            p.parcellaire
              ? `<a href="${p.parcellaire}" target="_blank">Voir le parcellaire</a>`
              : "—"
          }
        </div>

        <div class="section">
          <strong>Description</strong><br>
          <p>${p.description}</p>
        </div>

        <div class="section">
          <h2>Votre avis sur le projet</h2>
          <!-- form comes next -->
        </div>
      `;
    });
</script>

</body>
</html>
